import { __decorate, __metadata } from "tslib";
import { Component, EventEmitter, ChangeDetectionStrategy, ChangeDetectorRef, TemplateRef, ElementRef, Renderer2, HostBinding, OnInit, OnDestroy } from '@angular/core';
import { uniqueId, ngClassCombine } from '../util/util';
import { POSITION_MAP, getPlacementStyles } from '../util/overlay-position';
import { FocusTrap, FocusTrapFactory } from '@angular/cdk/a11y';
import { HostService } from '../common/host/host.service';
import { isTemplateRef } from '../util/check';
import { OnChange } from '../util/property-watch-decorator';
var NglPopover = /** @class */ (function () {
    function NglPopover(hostService, element, renderer, focusTrapFactory, cd) {
        this.hostService = hostService;
        this.element = element;
        this.renderer = renderer;
        this.focusTrapFactory = focusTrapFactory;
        this.cd = cd;
        this.close = new EventEmitter();
        this.isTemplateRef = isTemplateRef;
        this.uid = uniqueId('popover');
    }
    Object.defineProperty(NglPopover.prototype, "labelledby", {
        get: function () {
            return this.header ? this.uid + "-heading" : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NglPopover.prototype, "describedby", {
        get: function () {
            return this.template ? this.uid : null;
        },
        enumerable: true,
        configurable: true
    });
    NglPopover.prototype.ngOnInit = function () {
        this.focusTrap = this.focusTrapFactory.create(this.element.nativeElement);
        this.focusTrap.focusInitialElementWhenReady();
    };
    NglPopover.prototype.ngOnDestroy = function () {
        if (this.focusTrap) {
            this.focusTrap.destroy();
            this.focusTrap = null;
        }
    };
    NglPopover.prototype.nglOnPropertyChange = function (prop) {
        if (prop === 'size' || prop === 'popoverClass') {
            this.setHostClass();
        }
        else if (prop === 'placement') {
            this.nubbin = POSITION_MAP[this.placement].nubbin;
            this.setHostClass();
        }
        else if (prop === 'variant') {
            this.inverseCloseButton = ['walkthrough', 'feature', 'error'].indexOf(this.variant) > -1;
            this.setHostClass();
        }
    };
    NglPopover.prototype.markForCheck = function () {
        this.cd.markForCheck();
    };
    NglPopover.prototype.onClose = function () {
        this.close.emit();
    };
    NglPopover.prototype.setHostClass = function () {
        var _a;
        this.hostService.updateClass(this.element, ngClassCombine(this.popoverClass, (_a = {},
            _a["slds-nubbin_" + this.nubbin] = true,
            _a["slds-popover_" + this.size] = !!this.size,
            _a["slds-popover_walkthrough"] = this.variant === 'feature',
            _a["slds-popover_" + this.variant] = !!this.variant,
            _a)));
        this.hostService.updateStyle(this.element, getPlacementStyles(this.nubbin));
    };
    NglPopover.ctorParameters = function () { return [
        { type: HostService },
        { type: ElementRef },
        { type: Renderer2 },
        { type: FocusTrapFactory },
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        OnChange(),
        __metadata("design:type", Object)
    ], NglPopover.prototype, "popoverClass", void 0);
    __decorate([
        OnChange(),
        __metadata("design:type", String)
    ], NglPopover.prototype, "size", void 0);
    __decorate([
        OnChange(),
        __metadata("design:type", String)
    ], NglPopover.prototype, "variant", void 0);
    __decorate([
        OnChange(),
        __metadata("design:type", String)
    ], NglPopover.prototype, "placement", void 0);
    __decorate([
        HostBinding('attr.aria-labelledby'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NglPopover.prototype, "labelledby", null);
    __decorate([
        HostBinding('attr.aria-describedby'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NglPopover.prototype, "describedby", null);
    NglPopover = __decorate([
        Component({
            // tslint:disable-next-line:component-selector
            selector: 'section[ngl-popover]',
            template: "\n<button class=\"slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close\" *ngIf=\"canClose &amp;&amp; closeVisible\" [title]=\"closeTitle\" [class.slds-button_icon-inverse]=\"inverseCloseButton\" (click)=\"onClose()\">\n  <svg class=\"slds-button__icon\" nglIconName=\"close\"></svg><span class=\"slds-assistive-text\" *ngIf=\"closeTitle\">{{closeTitle}}</span>\n</button>\n<header class=\"slds-popover__header\" *ngIf=\"header\">\n  <div *ngIf=\"isTemplateRef(header); else defaultTpl\" [id]=\"labelledby\">\n    <ng-container [ngTemplateOutlet]=\"header\"></ng-container>\n  </div>\n  <ng-template #defaultTpl>\n    <h2 class=\"slds-text-heading_small\" [id]=\"labelledby\">{{header}}</h2>\n  </ng-template>\n</header>\n<div class=\"slds-popover__body\" [id]=\"uid\" [nglInternalOutlet]=\"template\"></div>\n<footer class=\"slds-popover__footer\" *ngIf=\"footer\" [nglInternalOutlet]=\"footer\"></footer>",
            changeDetection: ChangeDetectionStrategy.OnPush,
            providers: [HostService],
            host: {
                'role': 'dialog',
                '[class.slds-popover]': 'true',
            }
        }),
        __metadata("design:paramtypes", [HostService,
            ElementRef,
            Renderer2,
            FocusTrapFactory,
            ChangeDetectorRef])
    ], NglPopover);
    return NglPopover;
}());
export { NglPopover };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wb3Zlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25nLWxpZ2h0bmluZy8iLCJzb3VyY2VzIjpbImxpYi9wb3BvdmVycy9wb3BvdmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFDMUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUYsT0FBTyxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDeEQsT0FBTyxFQUFhLFlBQVksRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVoRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFhNUQ7SUEwQ0Usb0JBQ1UsV0FBd0IsRUFDekIsT0FBbUIsRUFDbkIsUUFBbUIsRUFDbEIsZ0JBQWtDLEVBQ2xDLEVBQXFCO1FBSnJCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQ3pCLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDbkIsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUNsQixxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBakIvQixVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUUzQixrQkFBYSxHQUFHLGFBQWEsQ0FBQztRQUU5QixRQUFHLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBYVEsQ0FBQztJQTFCbkMsc0JBQUksa0NBQVU7YUFB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QUFDOzs7aURBR3BDO0lBNUJVLFVBQVU7UUFYdEIsU0FBUyxDQUFDO1lBQ1QsOENBQThDO1lBQzlDLFFBQVEsRUFBRSxzQkFBc0I7WUFDaEMseTdCQUE2QjtZQUM3QixlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtZQUMvQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLENBQUM7WUFDeEIsSUFBSSxFQUFFO2dCQUNKLE1BQU0sRUFBRSxRQUFRO2dCQUNoQixzQkFBc0IsRUFBRSxNQUFNO2FBQy9CO1NBQ0YsQ0FBQzt5Q0E0Q3VCLFdBQVc7WUFDaEIsVUFBVTtZQUNULFNBQVM7WUFDQSxnQkFBZ0I7WUFDOUIsaUJBQWlCO09BL0NwQixVQUFVLENBNEZ0QjtJQUFELGlCQUFDO0NBQUEsQUE1RkQsSUE0RkM7U0E1RlksVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIFRlbXBsYXRlUmVmLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIEhvc3RCaW5kaW5nLCBPbkluaXQsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgdW5pcXVlSWQsIG5nQ2xhc3NDb21iaW5lIH0gZnJvbSAnLi4vdXRpbC91dGlsJztcbmltcG9ydCB7IFBsYWNlbWVudCwgUE9TSVRJT05fTUFQLCBnZXRQbGFjZW1lbnRTdHlsZXMgfSBmcm9tICcuLi91dGlsL292ZXJsYXktcG9zaXRpb24nO1xuaW1wb3J0IHsgRm9jdXNUcmFwLCBGb2N1c1RyYXBGYWN0b3J5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuaW1wb3J0IHsgVmFyaWFudCwgU2l6ZSB9IGZyb20gJy4vdHJpZ2dlcic7XG5pbXBvcnQgeyBIb3N0U2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9ob3N0L2hvc3Quc2VydmljZSc7XG5pbXBvcnQgeyBpc1RlbXBsYXRlUmVmIH0gZnJvbSAnLi4vdXRpbC9jaGVjayc7XG5pbXBvcnQgeyBPbkNoYW5nZSB9IGZyb20gJy4uL3V0aWwvcHJvcGVydHktd2F0Y2gtZGVjb3JhdG9yJztcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICdzZWN0aW9uW25nbC1wb3BvdmVyXScsXG4gIHRlbXBsYXRlVXJsOiAnLi9wb3BvdmVyLmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbSG9zdFNlcnZpY2VdLFxuICBob3N0OiB7XG4gICAgJ3JvbGUnOiAnZGlhbG9nJyxcbiAgICAnW2NsYXNzLnNsZHMtcG9wb3Zlcl0nOiAndHJ1ZScsXG4gIH0sXG59KVxuZXhwb3J0IGNsYXNzIE5nbFBvcG92ZXIgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG5cbiAgdGVtcGxhdGU6IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+O1xuXG4gIGhlYWRlcjogc3RyaW5nIHwgVGVtcGxhdGVSZWY8dm9pZD47XG5cbiAgZm9vdGVyOiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjx2b2lkPjtcblxuICBjbG9zZVRpdGxlOiBzdHJpbmc7XG5cbiAgY2xvc2VWaXNpYmxlOiBib29sZWFuO1xuXG4gIEBPbkNoYW5nZSgpIHBvcG92ZXJDbGFzczogYW55O1xuXG4gIEBPbkNoYW5nZSgpIHNpemU6IFNpemU7XG5cbiAgQE9uQ2hhbmdlKCkgdmFyaWFudDogVmFyaWFudDtcblxuICBAT25DaGFuZ2UoKSBwbGFjZW1lbnQ6IFBsYWNlbWVudDtcblxuICBASG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1sYWJlbGxlZGJ5JylcbiAgZ2V0IGxhYmVsbGVkYnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyID8gYCR7dGhpcy51aWR9LWhlYWRpbmdgIDogbnVsbDtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLWRlc2NyaWJlZGJ5JylcbiAgZ2V0IGRlc2NyaWJlZGJ5KCkge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlID8gdGhpcy51aWQgOiBudWxsO1xuICB9XG5cbiAgY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgaXNUZW1wbGF0ZVJlZiA9IGlzVGVtcGxhdGVSZWY7XG4gIGNhbkNsb3NlOiBib29sZWFuO1xuICB1aWQgPSB1bmlxdWVJZCgncG9wb3ZlcicpO1xuICBpbnZlcnNlQ2xvc2VCdXR0b246IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBudWJiaW46IFBsYWNlbWVudDtcblxuICAvKiogVGhlIGNsYXNzIHRoYXQgdHJhcHMgYW5kIG1hbmFnZXMgZm9jdXMgd2l0aGluIHRoZSBkaWFsb2cuICovXG4gIHByaXZhdGUgZm9jdXNUcmFwOiBGb2N1c1RyYXA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBob3N0U2VydmljZTogSG9zdFNlcnZpY2UsXG4gICAgcHVibGljIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgcHVibGljIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgcHJpdmF0ZSBmb2N1c1RyYXBGYWN0b3J5OiBGb2N1c1RyYXBGYWN0b3J5LFxuICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuZm9jdXNUcmFwID0gdGhpcy5mb2N1c1RyYXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCk7XG4gICAgdGhpcy5mb2N1c1RyYXAuZm9jdXNJbml0aWFsRWxlbWVudFdoZW5SZWFkeSgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gIGlmICh0aGlzLmZvY3VzVHJhcCkge1xuICAgICAgdGhpcy5mb2N1c1RyYXAuZGVzdHJveSgpO1xuICAgICAgdGhpcy5mb2N1c1RyYXAgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIG5nbE9uUHJvcGVydHlDaGFuZ2UocHJvcCkge1xuICAgIGlmIChwcm9wID09PSAnc2l6ZScgfHwgcHJvcCA9PT0gJ3BvcG92ZXJDbGFzcycpIHtcbiAgICAgIHRoaXMuc2V0SG9zdENsYXNzKCk7XG4gICAgfSBlbHNlIGlmIChwcm9wID09PSAncGxhY2VtZW50Jykge1xuICAgICAgdGhpcy5udWJiaW4gPSBQT1NJVElPTl9NQVBbdGhpcy5wbGFjZW1lbnRdLm51YmJpbjtcbiAgICAgIHRoaXMuc2V0SG9zdENsYXNzKCk7XG4gICAgfSBlbHNlIGlmIChwcm9wID09PSAndmFyaWFudCcpIHtcbiAgICAgIHRoaXMuaW52ZXJzZUNsb3NlQnV0dG9uID0gWyd3YWxrdGhyb3VnaCcsICdmZWF0dXJlJywgJ2Vycm9yJ10uaW5kZXhPZih0aGlzLnZhcmlhbnQpID4gLTE7XG4gICAgICB0aGlzLnNldEhvc3RDbGFzcygpO1xuICAgIH1cbiAgfVxuXG4gIG1hcmtGb3JDaGVjaygpIHtcbiAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNsb3NlLmVtaXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0SG9zdENsYXNzKCkge1xuICAgIHRoaXMuaG9zdFNlcnZpY2UudXBkYXRlQ2xhc3ModGhpcy5lbGVtZW50LCBuZ0NsYXNzQ29tYmluZSh0aGlzLnBvcG92ZXJDbGFzcywge1xuICAgICAgW2BzbGRzLW51YmJpbl8ke3RoaXMubnViYmlufWBdOiB0cnVlLFxuICAgICAgW2BzbGRzLXBvcG92ZXJfJHt0aGlzLnNpemV9YF06ICEhdGhpcy5zaXplLFxuICAgICAgW2BzbGRzLXBvcG92ZXJfd2Fsa3Rocm91Z2hgXTogdGhpcy52YXJpYW50ID09PSAnZmVhdHVyZScsXG4gICAgICBbYHNsZHMtcG9wb3Zlcl8ke3RoaXMudmFyaWFudH1gXTogISF0aGlzLnZhcmlhbnQsXG4gICAgfSkpO1xuXG4gICAgdGhpcy5ob3N0U2VydmljZS51cGRhdGVTdHlsZSh0aGlzLmVsZW1lbnQsIGdldFBsYWNlbWVudFN0eWxlcyh0aGlzLm51YmJpbikpO1xuICB9XG5cbn1cbiJdfQ==