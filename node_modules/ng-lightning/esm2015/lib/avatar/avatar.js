import { __decorate, __metadata } from "tslib";
import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy, ElementRef, Renderer2, HostBinding, OnInit, OnChanges } from '@angular/core';
import { HostService } from '../common/host/host.service';
let NglAvatar = class NglAvatar {
    constructor(element, renderer, hostService) {
        this.element = element;
        this.hostService = hostService;
        this.src = '';
        this.alternativeText = '';
        this.fallbackIconName = 'standard:user';
        this.error = new EventEmitter();
        this._imgError = false;
        renderer.addClass(element.nativeElement, 'slds-avatar');
    }
    fallbackIconClass() {
        const [category, icon] = this.fallbackIconName.split(':');
        return `slds-icon-${category}-${icon}`;
    }
    get shouldShowImage() {
        return this.src && !this._imgError;
    }
    onImgError() {
        this._imgError = true;
        this.error.emit();
    }
    ngOnInit() {
        this.setHostClass();
    }
    ngOnChanges() {
        this.setHostClass();
    }
    setHostClass() {
        this.hostService.updateClass(this.element, {
            [`slds-avatar_${this.size || 'medium'}`]: true,
            [`slds-avatar_${this.variant || 'rectangle'}`]: true,
        });
    }
};
NglAvatar.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: HostService }
];
__decorate([
    Input(),
    __metadata("design:type", Object)
], NglAvatar.prototype, "src", void 0);
__decorate([
    HostBinding('attr.title'),
    Input(),
    __metadata("design:type", Object)
], NglAvatar.prototype, "alternativeText", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NglAvatar.prototype, "size", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NglAvatar.prototype, "variant", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NglAvatar.prototype, "initials", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], NglAvatar.prototype, "fallbackIconName", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], NglAvatar.prototype, "error", void 0);
NglAvatar = __decorate([
    Component({
        selector: 'ngl-avatar',
        changeDetection: ChangeDetectionStrategy.OnPush,
        template: "<img *ngIf=\"shouldShowImage; else template_initials\" [src]=\"src\" [alt]=\"alternativeText\" (error)=\"onImgError()\">\n<ng-template #template_initials><abbr class=\"slds-avatar__initials\" [ngClass]=\"fallbackIconClass()\">{{ initials }}</abbr></ng-template>",
        providers: [HostService]
    }),
    __metadata("design:paramtypes", [ElementRef, Renderer2, HostService])
], NglAvatar);
export { NglAvatar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctbGlnaHRuaW5nLyIsInNvdXJjZXMiOlsibGliL2F2YXRhci9hdmF0YXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsdUJBQXVCLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2SixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFRMUQsSUFBYSxTQUFTLEdBQXRCLE1BQWEsU0FBUztJQXdCcEIsWUFBb0IsT0FBbUIsRUFBRSxRQUFtQixFQUFVLFdBQXdCO1FBQTFFLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFBK0IsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUF2QnJGLFFBQUcsR0FBRyxFQUFFLENBQUM7UUFHVCxvQkFBZSxHQUFHLEVBQUUsQ0FBQztRQWNyQixxQkFBZ0IsR0FBRyxlQUFlLENBQUM7UUFFbEMsVUFBSyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFN0IsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUd4QixRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELGlCQUFpQjtRQUNmLE1BQU0sQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxRCxPQUFPLGFBQWEsUUFBUSxJQUFJLElBQUksRUFBRSxDQUFDO0lBQ3pDLENBQUM7SUFFRCxJQUFJLGVBQWU7UUFDakIsT0FBTyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUNyQyxDQUFDO0lBRUQsVUFBVTtRQUNSLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVPLFlBQVk7UUFDbEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUN6QyxDQUFDLGVBQWUsSUFBSSxDQUFDLElBQUksSUFBSSxRQUFRLEVBQUUsQ0FBQyxFQUFFLElBQUk7WUFDOUMsQ0FBQyxlQUFlLElBQUksQ0FBQyxPQUFPLElBQUksV0FBVyxFQUFFLENBQUMsRUFBRSxJQUFJO1NBQ3JELENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRixDQUFBOztZQWhDOEIsVUFBVTtZQUFZLFNBQVM7WUFBdUIsV0FBVzs7QUF2QnJGO0lBQVIsS0FBSyxFQUFFOztzQ0FBVTtBQUdUO0lBRFIsV0FBVyxDQUFDLFlBQVksQ0FBQztJQUN6QixLQUFLLEVBQUU7O2tEQUFzQjtBQUtyQjtJQUFSLEtBQUssRUFBRTs7dUNBQWM7QUFLYjtJQUFSLEtBQUssRUFBRTs7MENBQWlCO0FBRWhCO0lBQVIsS0FBSyxFQUFFOzsyQ0FBa0I7QUFFakI7SUFBUixLQUFLLEVBQUU7O21EQUFvQztBQUVsQztJQUFULE1BQU0sRUFBRTs7d0NBQTRCO0FBcEIxQixTQUFTO0lBTnJCLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSxZQUFZO1FBQ3RCLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO1FBQy9DLGlSQUE0QjtRQUM1QixTQUFTLEVBQUUsQ0FBQyxXQUFXLENBQUM7S0FDekIsQ0FBQztxQ0F5QjZCLFVBQVUsRUFBWSxTQUFTLEVBQXVCLFdBQVc7R0F4Qm5GLFNBQVMsQ0F3RHJCO1NBeERZLFNBQVMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiwgSG9zdEJpbmRpbmcsIE9uSW5pdCwgT25DaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIb3N0U2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9ob3N0L2hvc3Quc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25nbC1hdmF0YXInLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgdGVtcGxhdGVVcmw6ICcuL2F2YXRhci5odG1sJyxcbiAgcHJvdmlkZXJzOiBbSG9zdFNlcnZpY2VdLFxufSlcbmV4cG9ydCBjbGFzcyBOZ2xBdmF0YXIgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIHNyYyA9ICcnO1xuXG4gIEBIb3N0QmluZGluZygnYXR0ci50aXRsZScpXG4gIEBJbnB1dCgpIGFsdGVybmF0aXZlVGV4dCA9ICcnO1xuXG4gIC8qXG4gICAqIFRoZSBzaXplIG9mIHRoZSBhdmF0YXIuXG4gICAqL1xuICBASW5wdXQoKSBzaXplOiBzdHJpbmc7XG5cbiAgLypcbiAgICogVGhlIHZhcmlhbnQgY2hhbmdlcyB0aGUgc2hhcGUgb2YgdGhlIGF2YXRhci5cbiAgICovXG4gIEBJbnB1dCgpIHZhcmlhbnQ6IHN0cmluZztcblxuICBASW5wdXQoKSBpbml0aWFsczogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIGZhbGxiYWNrSWNvbk5hbWUgPSAnc3RhbmRhcmQ6dXNlcic7XG5cbiAgQE91dHB1dCgpIGVycm9yID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIHByaXZhdGUgX2ltZ0Vycm9yID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLCByZW5kZXJlcjogUmVuZGVyZXIyLCBwcml2YXRlIGhvc3RTZXJ2aWNlOiBIb3N0U2VydmljZSkge1xuICAgIHJlbmRlcmVyLmFkZENsYXNzKGVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ3NsZHMtYXZhdGFyJyk7XG4gIH1cblxuICBmYWxsYmFja0ljb25DbGFzcygpIHtcbiAgICBjb25zdCBbY2F0ZWdvcnksIGljb25dID0gdGhpcy5mYWxsYmFja0ljb25OYW1lLnNwbGl0KCc6Jyk7XG4gICAgcmV0dXJuIGBzbGRzLWljb24tJHtjYXRlZ29yeX0tJHtpY29ufWA7XG4gIH1cblxuICBnZXQgc2hvdWxkU2hvd0ltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLnNyYyAmJiAhdGhpcy5faW1nRXJyb3I7XG4gIH1cblxuICBvbkltZ0Vycm9yKCkge1xuICAgIHRoaXMuX2ltZ0Vycm9yID0gdHJ1ZTtcbiAgICB0aGlzLmVycm9yLmVtaXQoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuc2V0SG9zdENsYXNzKCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcygpIHtcbiAgICB0aGlzLnNldEhvc3RDbGFzcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRIb3N0Q2xhc3MoKSB7XG4gICAgdGhpcy5ob3N0U2VydmljZS51cGRhdGVDbGFzcyh0aGlzLmVsZW1lbnQsIHtcbiAgICAgIFtgc2xkcy1hdmF0YXJfJHt0aGlzLnNpemUgfHwgJ21lZGl1bSd9YF06IHRydWUsXG4gICAgICBbYHNsZHMtYXZhdGFyXyR7dGhpcy52YXJpYW50IHx8ICdyZWN0YW5nbGUnfWBdOiB0cnVlLFxuICAgIH0pO1xuICB9XG59XG4iXX0=